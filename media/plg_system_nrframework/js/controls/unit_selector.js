var TF_Unit_Control_Selector=function(){function t(){this.initEvents()}var e=t.prototype;return e.initEvents=function(){document.querySelectorAll(".tf-unit-control--value").forEach(function(t){tfAutosizeInput(t)}),document.addEventListener("dblclick",function(t){this.onSelectValue(t)}.bind(this)),document.addEventListener("input",function(t){this.onType(t)}.bind(this)),document.addEventListener("click",function(t){this.onToggle(t),this.onOutsideClick(t),this.onSelect(t),this.onFocus(t)}.bind(this)),document.addEventListener("focusout",function(t){this.onStoppedTyping(t)}.bind(this))},e.onType=function(t){var e=t.target.closest(".tf-unit-control--value");if(e){var n=this.getUnitWrapper(e);""===e.value?n.classList.remove("has-value"):n.classList.add("has-value")}},e.onSelectValue=function(t){var e=t.target.closest(".tf-unit-control");if(e){var n=e.querySelector(".tf-unit-control--value");n.focus(),n.select()}},e.onFocus=function(t){var e=t.target.closest(".tf-unit-control"),n=t.target.closest(".tf-unit-control-dropdown");e&&!n&&"auto"!==e.querySelector("input.tf-unit-control-unit-value").value&&(e.querySelector("input.tf-unit-control--value").focus(),e.classList.add("has-focus"))},e.onStoppedTyping=function(t){var e=t.target.closest(".tf-unit-control--value");e&&this.getUnitWrapper(e).classList.remove("has-focus")},e.onToggle=function(t){var e=t.target.closest(".tf-unit-control-dropdown--opener");if(e){this.closeAllInstances();var n=this.getWrapper(e);n.querySelector(".tf-unit-control-dropdown--drop")&&(n.classList.contains("is-open")?n.classList.remove("is-open"):n.classList.add("is-open"))}},e.onOutsideClick=function(t){t.target.closest(".tf-unit-control-dropdown")||this.closeAllInstances()},e.closeAllInstances=function(){document.querySelectorAll(".tf-unit-control-dropdown.is-open").forEach(function(t){t.classList.remove("is-open")})},e.getUnitWrapper=function(t){return t.closest(".tf-unit-control")},e.getWrapper=function(t){return t.closest(".tf-unit-control-dropdown")},e.onSelect=function(t){var e=t.target.closest(".tf-unit-control-dropdown--drop--item");if(e){var n=this.getWrapper(e),o=e.innerHTML,s=!!e.closest(".tf-unit-control")&&e.closest(".tf-unit-control");if(s){var i=s.querySelector("input.tf-unit-control--value");n.querySelector(".tf-unit-control-dropdown--opener--selected--unit").innerHTML=o,"auto"===(s.querySelector("input.tf-unit-control-unit-value").value=o)?(s.classList.add("is-readonly"),i.setAttribute("readonly",""),i.removeAttribute("placeholder"),i.value=""):(i.removeAttribute("readonly"),i.setAttribute("placeholder",s.dataset.hint),i.focus(),s.classList.add("has-focus"),s.classList.remove("is-readonly"),""===i.value&&s.classList.remove("has-value")),i.dispatchEvent(new CustomEvent("input"))}else if(e.closest(".tf-dimension-control")){var r=e.closest(".tf-dimension-control");r.querySelector("input.tf-unit-control-unit-value").value=o,r.querySelectorAll(".tf-unit-control-dropdown--opener--selected--unit").forEach(function(t){t.innerHTML=o}),r.querySelector("input:first-of-type").focus()}var c=e.parentElement.querySelector(".tf-unit-control-dropdown--drop--item.selected");c&&c.classList.remove("selected"),e.classList.add("selected"),this.closeAllInstances()}},t}();document.addEventListener("DOMContentLoaded",function(){new TF_Unit_Control_Selector});

