var TF_Video_Init=function(){function e(){this.players=[],this.init()}var i=e.prototype;return i.init=function(){if(this.initEvents(),window.IntersectionObserver){var e=document.querySelectorAll(".nrf-widget.tf-video:not(.done)");if(e){var o=this,i=new IntersectionObserver(function(e,i){e.forEach(function(e){if(e.isIntersecting){var i=e.target;if(i.classList.contains("done"))return;if(i.querySelector(".tf-video-embed-overlay")&&!i.classList.contains("hiddenOverlay")&&"true"!==i.querySelector(".tf-video-embed").dataset.videoAutoplay)return;o.startVideo(i)}else{var t=e.target;if(!t.classList.contains("done"))return;if(!("videoAutopause"in t.querySelector(".tf-video-embed").dataset))return;if("false"===t.querySelector(".tf-video-embed").dataset.videoAutopause)return;o.pauseVideo(t)}})},{rootMargin:"0px 0px 0px 0px"});e.forEach(function(e){i.observe(e)})}}},i.startVideo=function(e){switch(e.classList.add("done"),e.querySelector(".tf-video-embed").dataset.videoType){case"youtube":this.players[e.id]=new TF_YouTube_Video(e),this.players[e.id].init();break;case"vimeo":this.players[e.id]=new TF_Vimeo_Video(e),this.players[e.id].init();break;case"facebookvideo":this.players[e.id]=new TF_FacebookVideo_Video(e),this.players[e.id].init();break;case"dailymotion":this.players[e.id]=new TF_Dailymotion_Video(e),this.players[e.id].init();break;case"selfhostedvideo":this.players[e.id]=new TF_SelfHostedVideo_Video(e),this.players[e.id].init()}},i.pauseVideo=function(e){this.players[e.id].pause()},i.initEvents=function(){document.addEventListener("click",function(e){this.onCoverClose(e)}.bind(this))},i.onCoverClose=function(e){var i=e.target.closest(".tf-video-embed-overlay");if(i){var t=i.closest(".nrf-widget.tf-video");t.classList.add("hiddenOverlay"),this.startVideo(t)}},e}();document.addEventListener("DOMContentLoaded",function(){new TF_Video_Init});

